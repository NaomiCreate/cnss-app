<h3 *ngFor="let item of record">Welcome {{item.firstName}},</h3>

<!-- <h4>Your Details:</h4> -->

<div class="error-msg">
	<!-- user error -->
	<p *ngIf="errorMessage.length > 0" class="text-danger">{{errorMessage}}</p>
	<!-- firebase error handle -->
	<p *ngIf="error.message.length > 0" class="text-danger">{{error.message}}</p>
	<!-- the data registered in firebase -->
	<p *ngIf="message.length > 0" class="text-info">{{message}}</p>
</div>

<table>
    <tbody *ngFor="let item of record">
        <div *ngIf="!inEdit; else elseBlock">
            <tr>
                <th>First Name:</th>    
                <td>{{item.firstName}}</td>
            </tr>
            <tr>
                <th>Last Name:</th>    
                <td>{{item.lastName}}</td>
            </tr>
            <tr>
                <th>Email:</th>   
                <td>{{item.email}}</td>
            </tr>
            <tr>
                <th>Phone Number:</th>   
                <td>{{item.phone}}</td>
            </tr>
            <tr *ngIf="item.is_device_owner; else elseNotOwningCNSSBlock">
                <th>System Owner?</th>  
                <td>Yes</td>
            </tr>
            <ng-template #elseNotOwningCNSSBlock>
                <th>System Owner?</th>     
                <td>No</td>
            </ng-template>
            <tr class="noBorder">
                <p></p>
                <p></p>
                <a routerLink="/profile" (click)="editRecord(item)" class="btn btn-primary">Edit</a>
            </tr>
        </div>
        
        <!-- next lines willshow after pressing Edit Contact: -->
        <ng-template #elseBlock>  
            <tr>
                <th>First Name:</th>    
                <td><input type="text" [(ngModel)]="item.editFirstName" class="from-control"></td>
            </tr>
            <tr>
                <th>Last Name:</th>    
                <td><input type="text" [(ngModel)]="item.editLastName" class="from-control"></td>
            </tr>
            <tr>
                <th>Email:</th>   
                <td>{{item.email}}</td>
                
            </tr>
            <tr>
                <th>Phone Number:</th>   
                <td><input type="text" [(ngModel)]="item.editPhone" class="from-control"></td>
            </tr>

            <tr *ngIf="item.editIsDeviceOwner">
                <th>Device ID:</th>   
                <td><input type="text" [(ngModel)]="item.editDeviceID" class="from-control"></td>
            </tr>

            <!-- <tr *ngIf="!item.editIsDeviceOwner"> -->
            <tr>
                <div class="ownership" name="ownership">
                    <input type="radio"  [(ngModel)]="item.editIsDeviceOwner" [value]="true" />  
                    <label>I own a security system</label><br>  
                    <input type="radio"  [(ngModel)]="item.editIsDeviceOwner" [value]="false" />
                    <label>I dont own a security system</label><br>  
                </div>
        
            </tr>
                <tr><button (click)="updateRecord(item)">Update</button></tr>
                <tr><button id="cancel" (click)="inEdit = false">Cancel</button></tr>            
            </ng-template>
    </tbody> 
</table>




